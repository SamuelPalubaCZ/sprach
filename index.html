<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stasi Speech Machine</title>
    <link rel="stylesheet" href="css/normal-look.css">
    <script src="buffer-loader.js"></script>
    <script src="sprach.js"></script>
</head>
<body>

    <div id="layout">
        <div class="header">
            <h1 class="brand-title">Sprach Machine</h1>
            <h2 class="brand-tagline">Number Station Simulator</h2>
        </div>

        <div class="content">
            <div class="program-section">
                <h2 class="content-subhead">Message Transmitter</h2>
                <form id="speech-form" class="pure-form pure-form-stacked" onsubmit="return false;">
                    <fieldset>
                        <label for="call">Call Sign</label>
                        <input id="call" type="text" value="271">

                        <label for="body">Message Body (Numbers only)</label>
                        <textarea rows="6" name="body" id="body">846 846 20 20 83167 83167 14528 14528 30778 30778 13436 13436 50234 50234 67256 67256 15654 15654 27414 27414 15837 15837 75251 75251 51820 51820 37982 37982 64162 64162 18385 18385 90381 90381 77942 77942 12692 12692 22897 22897 69231 69231 14881 14881 846 846 20 20 00000</textarea>
                        <p style="font-size: 0.9em; color: #666;">Use a space for a short pause, and `_` for a long pause. Special characters: `* / + #`.</p>

                        <div class="broadcast-options">
                            <div class="option-group">
                                <label for="callsign-reps">Callsign Reps:</label>
                                <input type="number" id="callsign-reps" value="2" min="1" max="10">
                            </div>
                            <div class="option-group">
                                <label for="achtung-signal"><input type="checkbox" id="achtung-signal" checked> Play 'Achtung'</label>
                            </div>
                            <div class="option-group">
                                <label for="auto-pause"><input type="checkbox" id="auto-pause" checked> Auto-pause</label>
                                <input type="number" id="auto-pause-duration" value="100" min="0" step="50" style="width: 70px; margin-left: 5px;"> ms
                            </div>
                        </div>

                        <div class="audio-controls">
                            <div class="control-group">
                                <label for="speed-control">Speed (0.5-2.0):</label>
                                <input type="number" id="speed-control" min="0.5" max="2.0" value="1.0" step="0.1">
                            </div>
                            <div class="control-group">
                                <label for="pitch-control">Pitch (0.5-2.0):</label>
                                <input type="number" id="pitch-control" min="0.5" max="2.0" value="1.0" step="0.1">
                            </div>
                        </div>

                        <button type="submit" id="generate-button" class="button-xlarge pure-button">Generate Audio File</button>
                    </fieldset>
                </form>
                <div id="audio-output" style="display: none; margin-top: 1em;">
                    <h3 style="margin-bottom: 0.5em;">Generated Audio:</h3>
                    <audio id="audio-playback" controls style="width: 100%;"></audio>
                    <a id="download-link" href="#" download="message.wav" class="pure-button" style="margin-top: 0.5em; display: block; text-align: center;">Download WAV file</a>
                </div>
            </div>

            <div class="encryption-section">
                <h2 class="content-subhead">Cipher Tool</h2>
                <form class="pure-form pure-form-stacked" onsubmit="return false;">
                    <fieldset>
                        <label for="plain-text">Plaintext</label>
                        <textarea id="plain-text" rows="4"></textarea>

                        <label for="cipher-key">Cipher Key</label>
                        <input type="text" id="cipher-key" value="STASI">

                        <button id="encrypt-button" class="pure-button">Encrypt</button>
                        <button id="decrypt-button" class="pure-button">Decrypt</button>

                        <label for="cipher-text">Ciphertext (for decryption)</label>
                        <textarea id="cipher-text" rows="4"></textarea>
                        <button id="copy-to-body-button" class="pure-button">Copy to Message Body</button>
                        <button id="copy-to-clipboard-button" class="pure-button">Copy to Clipboard</button>
                    </fieldset>
                </form>
            </div>

            <div class="keypad-section">
                <h2 class="content-subhead">Manual Tones</h2>
                <nav class="nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(1,0)">1</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(2,0)">2</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(3,0)">3</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(4,0)">4</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(5,0)">5</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(6,0)">6</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(7,0)">7</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(8,0)">8</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(9,0)">9</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(0,0)">0</a></li>
                    </ul>
                    <ul class="nav-list">
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(10,0)">Achtung (*)</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(11,0)">Trennung (/)</a></li>
                        <li class="nav-item"><a class="pure-button" href="javascript:playSound(12,0)">Ende (+)</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="footer">
            <p>Original by tom|hetmer|cz. Rebuilt by SamuelPalubaCZ (<a href="#" title="GitHub profile not provided">GitHub</a>).</p>
        </div>
    </div>

</body>
</html>
